window.onbeforeunload=function(){},$(window).on("load",function(){$("html, body").trigger("scroll")}),$(function(){GetLocation(),1==$(window.location.hash).length&&"modal"==$(window.location.hash).data("type")&&openObject(window.location.hash.replace("#","")),setTimeout(function(){"agree"!=$.cookie("useCookie")?($(".cookie_msg_js").css("top","calc(100% - "+$(".cookie_msg_js").outerHeight()+"px)"),$("body").on("click",".cookie_msg_js .close",function(a){a.preventDefault(),$(".cookie_msg_js").css("top","100%"),$.cookie("useCookie","agree",{expires:365}),setTimeout(function(){$(".cookie_wrap").remove(),$(".err_msg_as_title").css("opacity","1")},3e3)})):$(".err_msg_as_title").css("opacity","1")},2e3),$(".changeView_js").on("click",function(){var a=$(this).data("view");$(".productsListView i").removeClass("activeView"),$(this).addClass("activeView"),"list"==a?$(".cart_info .price_nav").removeClass("hidden"):$(".cart_info .price_nav").addClass("hidden"),ChangeView(a),resizeAsideScroll("click")}),$(".show_more_js").on("click",function(a){a.preventDefault();var b=$(this).closest(".products_page"),c=current_id_category,d=parseInt(b.find(".paginator li.active").first().text()),e=parseInt(b.find(".paginator li.active").last().text()),f=e+1,g=b.find(".card").get().length,h=30*(d-1),i=$(this).data("cnt");$(".show_more").append('<span class="load_more"></span>');var j={action:"getmoreproducts_desctop",id_category:c,shown_products:g,skipped_products:h};addLoadAnimation(".show_more_js"),ajax("products","getmoreproducts",j,"html").done(function(a){removeLoadAnimation(".show_more_js");var d=($.cookie("product_view"),parseInt(i-30-parseInt(h+g)));b.find(".products").append(a),$("img.lazy").lazyload({effect:"fadeIn"}),b.find(".paginator li.page"+f).length<1?parseInt(i-parseInt(h+g)+30)>30?b.find(".paginator li.next_pages").addClass("active").find("a").attr("href","#"):b.find(".paginator li.last_page").addClass("active").find("a").attr("href","#"):b.find(".paginator li.page"+f).addClass("active").find("a").attr("href","#"),d<0&&$("#show_more_products").hide(),$(".load_more").remove(),resizeAsideScroll("show_more")})}),$("body").on("change",".qty_js",function(){AddNoteArea($(this));var a=$(this).closest(".product_buy").attr("data-idproduct"),b=$(this).val(),c=$(this).closest(".product_section").find(".note textarea").val();SendToAjax(a,b,!1,!1,c)}),$("body").on("click",".buy_btn_js",function(){AddNoteArea($(this));var a=$(this).closest(".product_buy").attr("data-idproduct"),b=$(this).closest(".product_buy").find(".qty_js").val(),c=$(this).closest(".product_section").find(".note textarea").val();SendToAjax(a,b,!1,!1,c)}),$("body").on("click",".btn_qty_js",function(){AddNoteArea($(this))}),$(".note_field").blur(function(){""!==$(".note_field").val()&&$(this).closest(".card").find(".note").removeClass("activeNoteArea");var a=$(this).data("id"),b=$(this).val();ajax("cart","updateCartQty",{id_product:a,note:b})}),$("body").on("click",".remove_favor_js",function(a){a.preventDefault();var b=$(this).closest(".favorite_js").data("idproduct"),c=$(this);$("#confirmDelItem").data("delIdItem",b).data("list","favor"),c.addClass("clicked_js").closest(".tableRow").addClass("flag_js")}),$("body").on("click",".remove_waitinglist_js",function(a){a.preventDefault();var b=$(this).closest(".waiting_list_js").data("idproduct"),c=$(this);$("#confirmDelItem").data("delIdItem",b).data("list","waiting"),c.addClass("clicked_js").closest(".tableRow").addClass("flag_js")}),$("#confirmDelItem").on("click",".deleteBtn_js",function(){var a=$("#confirmDelItem").data("delIdItem"),b=$(".clicked_js");closeObject("confirmDelItem"),"favor"==$("#confirmDelItem").data("list")?(addLoadAnimation(".flag_js"),ajax("product","del_favorite",{id_product:a}).done(function(a){if(a.fav_count>0){b.closest(".favorite_js").remove(),$(".userChoiceFav").text("("+a.fav_count+")");var a={message:"\u0422\u043e\u0432\u0430\u0440 \u0443\u0434\u0430\u043b\u0435\u043d \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432"},c=document.querySelector("#snackbar");c.MaterialSnackbar.showSnackbar(a)}else $("#favorites").html("<h5>\u0423 \u0412\u0430\u0441 \u043d\u0435\u0442 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432</h5>"),$(".userChoiceFav").text("(0)")})):"waiting"==$("#confirmDelItem").data("list")&&(addLoadAnimation(".flag_js"),ajax("product","del_from_waitinglist",{id_product:a}).done(function(a){if(a.fav_count>0){b.closest(".waiting_list_js").remove(),$(".userChoiceWait").text("("+a.fav_count+")");var a={message:"\u0422\u043e\u0432\u0430\u0440 \u0443\u0434\u0430\u043b\u0435\u043d \u0438\u0437 \u043b\u0438\u0441\u0442\u0430 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f"},c=document.querySelector("#snackbar");c.MaterialSnackbar.showSnackbar(a)}else $("#waiting_list").html("<h5>\u041b\u0438\u0441\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043f\u0443\u0441\u0442</h5>"),$(".userChoiceWait").text("(0)")})),b.removeClass("clicked_js"),$(".flag_js").removeClass("flag_js")}),$("#confirmDelItem").on("click",".cancelBtn_js",function(){$("#confirmDelItem").removeData("delIdItem"),$(".clicked_js").removeClass("clicked_js"),$(".flag_js").removeClass("flag_js"),closeObject("confirmDelItem")}),$("#cart").on("click",".this_my_number_js",function(){var a=$("#cart #user_number").val();$("#confirmMyPhone .new_phone").val(a)}),$("#confirmMyPhone").on("click",".send_confirm_sms_js",function(){var a=$("#confirmMyPhone .new_phone").val().replace(/[^\d]+/g,"");$("#confirmMyPhone .new_phone").val(a),addLoadAnimation("#confirmMyPhone"),ajax("auth","recoverPhone",{phone:a}).done(function(){removeLoadAnimation("#confirmMyPhone"),$("#confirmMyPhone .ask_send_code_js").addClass("hidden"),$("#confirmMyPhone .ver_info_js").removeClass("hidden"),Position($('[data-type="modal"].opened')),$("#verification_code").focus()})}),$("#confirmMyPhone").on("click",".confirm_js",function(){var a=$("#verification_code").val(),b=$("#confirmMyPhone .new_phone").val();""===a?$("#verification_code").closest("div").addClass("is-invalid"):(addLoadAnimation("#confirmMyPhone"),ajax("auth","check\u0421odePhone",{phone:b,code:a}).done(function(){removeLoadAnimation("#confirmMyPhone"),$("#confirmMyPhone .ver_info_js").addClass("hidden"),$("#confirmMyPhone .ver_info_success_js").removeClass("hidden"),Position($('[data-type="modal"].opened'))}))}),$("#confirmMyPhone .continue_make_order_js").on("click",function(){closeObject("confirmMyPhone"),openObject("cart"),GetCartAjax()});$("#seoTextBlock").text();0===$('ul.second_nav.allSections > li.active > ul[data-lvl="2"] > li.active:has(ul)').length||$('ul.second_nav.allSections ul[data-lvl="3"] > li').hasClass("active")?$('.main_nav li[data-nav="filter"]').removeClass("hidden"):$('.main_nav li[data-nav="filter"]').addClass("hidden"),0===$("ul.second_nav.allSections li.active").find("li.active").length&&$('.main_nav li[data-nav="filter"]').addClass("hidden"),$("#segmentNavOrg, #segmentNavStore, #allCategotyCont").find("li.active")&&0===$("ul.second_nav li.active").find("li.active").length&&$('.main_nav li[data-nav="filter"]').addClass("hidden"),$(".main_nav > li").click(function(){$(".main_nav > li").hasClass("active")&&!$("ul.second_nav li").hasClass("active")&&$('.main_nav li[data-nav="filter"]').addClass("hidden")}),$('.second_nav > li[onclick^="segmentOpen"]').click(function(){$('.main_nav li[data-nav="filter"]').addClass("hidden")}),$("body").on("click",'a[href="#"]',function(a){a.preventDefault()});var b=$(window).width(),c=$(window).height(),e=($("section .center").height(),$("header").outerHeight());$("img.lazy").lazyload({effect:"fadeIn"}),$(".prod_structure span.list").on("click",function(){ChangeView("list")}),$(".prod_structure span.module").on("click",function(){ChangeView("module")});var f=.9;b>712&&(f=.8),$("#cart .order_wrapp").css("max-height",(c-e)*f),$(".mob_s_btn").on("click",function(){$("#search").focus()}),$("#search").on("keyup",function(){""!==$(this).val()?$(".search_btn").hasClass("is-disabled")||$(".search_btn").addClass("is-disabled"):$(".search_btn").hasClass("is-disabled")&&$(".search_btn").removeClass("is-disabled")}),$("#category-lower-right").on("click",function(a){a.preventDefault()}),$(".imit_select").on("click",".mdl-menu__item",function(){{var a=$(this).text();$(this).data("value")}$(this).closest(".imit_select").find(".mdl-menu__item").removeClass("active"),$(this).closest(".imit_select").find(".select_field").text(a),$(this).closest(".mdl-menu__container").removeClass("is-visible"),$(this).addClass("active")}),$(".region.imit_select").on("click",".mdl-menu__item",function(){GetCities($(".region.imit_select").find(".select_field").text()),$(".city.imit_select").find(".select_field").text("\u0412\u044b\u0431\u0440\u0430\u0442\u044c")}),$(".sort.imit_select .mdl-menu__item").on("click",function(){var a=JSON.parse($.cookie("sorting"));if(void 0!==a.current_controller){a.current_controller.value=$(this).data("value");var b=JSON.stringify(a);$.cookie("sorting",b,{expires:2,path:"/"}),location.reload()}}),$(".menu").on("click",function(){{var a=$(this).text();$("header").outerHeight()}$(this).html("menu"==a?"close":"menu")}),$(".search_close").on("click",function(){closeObject()});{var g=$("header"),h=$("body").hasClass("advantages_hide")?!0:!1,i=$(".advantages").outerHeight(),k=($(window).height(),$(window).width());$(".main").outerHeight(),$(".main_nav").outerHeight(!0)}$(".breadcrumbs .btn_js").on("click",function(){IsMobile===!0&&k>=728&&$("body").hasClass("no-sidebar")===!1&&$(this).removeClass("btn_js")}),$(".logo").on("click",function(a){$("body").hasClass("c_main")&&h===!0&&(a.preventDefault(),$(".advantages").animate({height:i},300),$("html, body").animate({scrollTop:0},300),$("body").removeClass("advantages_hide"),g.removeClass("fixed_panel").addClass("default"),setTimeout(function(){h=!1},305),IsMobile===!0&&$("aside").css({position:"absolute",bottom:"auto",top:"auto"}))}),$("mdl-menu__container").hover(function(){$(this).addClass("is-visible")},function(){$(this).removeClass("is-visible")}),$(".second_nav li.active > ul").show(),$(".catalog .label").on("click",function(){var a=0;if($(this).closest(".catalog").toggleClass("expanded"),$(this).closest(".catalog").hasClass("expanded")){var b=$(".navbar_js").find('[data-lvl="1"] > .link_wrap');a=b.length*b.first().outerHeight()}$(".navbar_js").height(a)}),$(".catalog").on("click",".main_nav li",function(){var a=$(this).data("nav");if("filter"==a){var b=$(this).find("i").text();"filter_list"==b?($(this).find("i").text("highlight_off"),$(this).find("span.title").text("\u0421\u043a\u0440\u044b\u0442\u044c"),$(".second_nav, .news ").slideUp(),$(".included_filters").hide(),$(".filters").fadeIn(),$(this).addClass("active")):($(this).find("i").text("filter_list"),$(this).find("span.title").text("\u0424\u0438\u043b\u044c\u0442\u0440\u044b"),$(".filters").fadeOut(),$(".second_nav, .news").slideDown(),$(".included_filters").show(),$(this).removeClass("active"),$(this).removeClass("hidden"))}else $(".catalog .main_nav li").removeClass("active"),$(this).addClass("active")}),$(".menus").on("click",function(){var a=$(this).closest("li").find("ul");a.hasClass("active")?a.removeClass("active").stop(!0,!0).slideUp():a.addClass("active").stop(!0,!0).slideDown()});var n=getScrollWindow();changeToTop(n),$(window).scroll(function(){n=getScrollWindow(),changeToTop(n)}),$("#toTop").click(function(){$("html, body").animate({scrollTop:0},1e3,"easeInOutCubic")});var o=$(".price"),p=$(".price_nav");if(o.length>0){var q=Math.round(o.offset().left+o.width()/2-p.width()/2);p.offset({left:q})}$(".product_main_img").css("height",$(".product_main_img").outerWidth()),$("#owl-product_mini_img_js").owlCarousel({items:6,itemsCustom:[[320,1],[727,2],[950,3],[1250,4],[1600,5]],navigation:!1,nav:!1,dots:!1,navigationText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']}),$("#owl-popular, #owl-other, #owl-last-viewed, #owl-accompanying, #owl-new-products").owlCarousel({autoplay:!0,dots:!1,stopOnHover:!0,slideSpeed:300,paginationSpeed:400,itemsScaleUp:!0,responsive:{320:{items:1},727:{items:3},950:{items:5},1250:{items:6},1600:{items:8}},nav:!0,navText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']}),$("#owl-top").owlCarousel({autoplay:!0,dots:!1,stopOnHover:!0,slideSpeed:300,items:4,paginationSpeed:400,itemsScaleUp:!0,nav:!0,navText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']}),idleTimer=null,idleState=!1,idleWait=1e5,$(document).ready(function(){$(document).bind("mousemove keydown scroll",function(){clearTimeout(idleTimer),idleState=!1,idleTimer=setTimeout(function(){screen.width>800&&(openObject("sliders-main"),$("#owl-main").owlCarousel({margin:20,autoWidth:!0,singleItem:!0,center:!0,itemsScaleUp:!0,lazyLoad:!0,loop:!0,rewind:!0,slideSpeed:1e3,smartSpeed:1e3,paginationSpeed:2e4,autoplaySpeed:100,autoplayTimeout:1e4,autoplayHoverPause:!0,stopOnHover:!0,autoplay:!0,stopOnHover:!0,slideSpeed:300,navText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']})),idleState=!0},idleWait)})}),$(".set_rating").on("change",function(){var a=$(this).val();changestars(a)}),$(".star").hover(function(){var a=$(this).closest("label").find("input").val();changestars(a),$(".feedback_stars").on("mouseleave",function(){a=$(this).find("input:checked").val(),a||(a=0),changestars(a)})}),$(".star").on("click",function(a){var b=$(this).closest("label").find("input");b.is(":checked")&&(a.preventDefault(),b.removeAttr("checked"),changestars(0))}),$("input.mdl-checkbox__input").on("click",function(){}),$("body").on("click",".background_panel",function(){closeObject()}),$('[data-type="modal"]').each(function(){$(this).append('<a href="#" class="close_modal btn_js" data-name="'+$(this).attr("id")+'"><i class="material-icons mdl-cell--hide-phone mdl-cell--hide-tablet">close</i><i class="material-icons mdl-cell--hide-desktop">cancel</i></a>')}),$(".product_main_img").on("click",function(){var a=$(this).find("img").attr("src"),c=$(this).find("img").attr("alt");$("#big_photo img").attr({src:a,alt:c}),$("#big_photo").css({"max-width":.9*b}),images=[],$("#owl-product_mini_img_js .owl-item").each(function(){$(this).find("img"),images.push($(this).find("img").attr("class"))});var d=0;$.each(images,function(a,b){"act_img"===b&&(d=a)});var e=$("#big_photos_carousel_js");e.owlCarousel(),e.trigger("to.owl.carousel",[d,500])}),$("#big_photo img").on("click",function(){closeObject()}),$("body").on("click",".btn_js",function(){var a=$(this).data("name");void 0!==a&&openObject(a)}),$(document).keyup(function(a){27==a.keyCode&&closeObject()}),$("body").on("click",".show_demand_chart_js, .chart_edit_js",function(){ModalDemandChart($(this).data("idcategory"))}),$("#demand_chart").on("click",".btn_js.save, .btn_js.update",function(){var a=$(this).closest("#demand_chart"),b=a.data("target"),c=0,d=a.find("#name_user").val(),e=a.find("textarea").val(),f=a.find('.one input[type="range"]'),g=a.find('.two input[type="range"]'),h={roz:{},opt:{}},i=a.find('input[type="hidden"][name="roz_id_chart"]').val(),j=a.find('input[type="hidden"][name="opt_id_chart"]').val();$(".select_go label").is(":checked")&&(c=1),f.each(function(a,b){h.roz[a]=$(b).val()}),g.each(function(a,b){h.opt[a]=$(b).val()}),$(this).hasClass("save")?ajax("product","SaveDemandChart",{values:h,id_category:b,name_user:d,text:e,opt:c}).done(function(a){0==$(".save.btn_js").data("isadmin")?($("#demand_chart_msg .modal_container").html('<div class="msg_wrap"><h3>\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u0438\u043c \u0412\u0430\u0441!</h3><p>\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b.</p><p>\u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c, \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u044b\u0435 \u0412\u0430\u043c\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u0443\u0447\u0442\u0435\u043d\u044b \u0432 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u043c \u0433\u0440\u0430\u0444\u0438\u043a\u0435 \u0441\u043f\u0440\u043e\u0441\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438.</p></div>'),componentHandler.upgradeDom(),closeObject("demand_chart"),openObject("demand_chart_msg")):a===!0&&(closeObject("demand_chart"),location.reload())}):ajax("product","UpdateDemandChart",{values:h,id_category:b,name_user:d,text:e,opt:c,id_charts:i+", "+j}).done(function(a){0==$(".update.btn_js").data("isadmin")?($("#demand_chart_msg .modal_container").html('<div class="msg_wrap"><h3>\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u0438\u043c \u0412\u0430\u0441!</h3><p>\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b.</p><p>\u041f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c, \u0432\u043d\u0435\u0441\u0435\u043d\u043d\u044b\u0435 \u0412\u0430\u043c\u0438 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u0443\u0447\u0442\u0435\u043d\u044b \u0432 \u0438\u0442\u043e\u0433\u043e\u0432\u043e\u043c \u0433\u0440\u0430\u0444\u0438\u043a\u0435 \u0441\u043f\u0440\u043e\u0441\u0430 \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438.</p></div>'),componentHandler.upgradeDom(),closeObject("demand_chart"),openObject("demand_chart_msg")):a===!0&&(closeObject("demand_chart"),location.reload())})}),$("body").on("click","#demand_chart_msg .close_modal",function(){location.reload()}),$("body").on("click",".avg_chart_det_btn_js",function(){$("#details_btn").hasClass("clicked")?($("#details_btn").removeClass("clicked"),$(".avg_chart_det_btn i").css("transform","rotate(0deg)"),$(".charts_container").css("border-color","transparent"),$(".charts_container .charts_title").addClass("hidden"),$(".charts_wrap").empty()):(addLoadAnimation("#details_btn"),ajax("product","ChartsByCategory",{id_category:$(this).data("idcategory")},"html").done(function(a){$(".avg_chart_det_btn i").css("transform","rotate(90deg)"),$(".charts_container .charts_title").removeClass("hidden"),$(".charts_container").css("border-color","#e0e0e0"),$("#details_btn").addClass("clicked"),removeLoadAnimation("#details_btn"),$(".charts_wrap").html(a),componentHandler.upgradeDom()}))}),$(".note textarea").on("blur",function(){}),$(".add_cart_state input:radio").on("click",function(){var a=!1;$(this.checked)&&(a=!0),$(this).prop("checked",a)}),$("#quiz").on("click",".to_step",function(a){function e(a){if(addLoadAnimation("#quiz"),a.target_step>a.current_step&&a.validate===!0)ajax("quiz","complete_step",a).done(function(b){if(console.log(b),b.success===!0){var c={reload:!1,step:b.target_step?b.target_step:a.target_step};b.target_id_order&&(c.target_id_order=b.target_id_order),b.id_user&&(c.id_user=b.id_user),GetQuizAjax(c)}});else{var b={reload:!1,step:a.target_step};response.target_id_order&&(b.target_id_order=response.target_id_order),response.id_user&&(b.id_user=response.id_user),GetQuizAjax(b)}}a.preventDefault();var b=0,c={validate:!1,current_step:$(this).closest('[class*="step_"]').data("step"),target_step:$(this).data("step"),id_user:$(this).closest('[class*="step_"]').data("id_user"),target_id_order:$(this).closest('[class*="step_"]').data("target_id_order")},d={summary:$("#quiz .summary_info"),current:$(".step_"+$(this).closest('[class*="step_"]').data("step")),target:$(".step_"+$(this).data("step"))};console.log(c),1==c.target_step?2==c.current_step&&e(c):2==c.target_step?1==c.current_step?($(this).hasClass("use_selected")?(c.id_address=d.current.find('[name="address"]').val(),null===c.id_address&&(b++,d.current.find(".mdl-selectfield.address").addClass("is-invalid"))):$(this).hasClass("create_new")?console.log("create clicked"):(c.last_name=d.current.find('[name="last_name"]').val(),c.first_name=d.current.find('[name="first_name"]').val(),c.middle_name=d.current.find('[name="middle_name"]').val(),0===c.last_name.length&&(b++,d.current.find('[name="last_name"]').addClass("is-invalid")),0===c.first_name.length&&(b++,d.current.find('[name="first_name"]').addClass("is-invalid")),0===c.middle_name.length&&(b++,d.current.find('[name="middle_name"]').addClass("is-invalid"))),0===b&&(c.validate=!0,e(c))):3==c.current_step&&e(c):3==c.target_step?2==c.current_step?(c.region=d.current.find("#region").val(),c.city=d.current.find("#city").val(),(null===c.region||0===c.region.length)&&(d.current.find(".region").addClass("is-invalid"),b++),(null===c.city||0===c.city.length)&&(d.current.find(".city").addClass("is-invalid"),b++),0===b&&(c.validate=!0,e(c))):4==c.current_step&&e(c):4==c.target_step?3==c.current_step&&(c.region=d.current.find("#region").val(),c.city=d.current.find("#city").val(),c.id_delivery=parseInt(d.current.find("#id_delivery").val()),c.id_delivery_service=parseInt(d.current.find("#id_delivery_service").val()),c.delivery_department=d.current.find("#delivery_department").val(),c.address=d.current.find("#address").val(),isNaN(c.id_delivery)?(d.current.find(".delivery").addClass("is-invalid"),b++):1==c.id_delivery?(null===c.delivery_department||0===c.delivery_department.length)&&(d.current.find(".delivery_department").addClass("is-invalid"),b++):2==c.id_delivery&&""===c.address&&(d.current.find(".address").addClass("is-invalid"),b++),isNaN(c.id_delivery_service)&&(d.current.find(".delivery_service").addClass("is-invalid"),b++),0===b&&(c.validate=!0,e(c))):5==c.target_step&&4==c.current_step&&(closeObject("quiz"),window.location.hash="",window.location.reload())}),$(".verification_btn").attr("disabled","disabled"),$("#verification").on("click",'[for="choise_current_pass"]',function(){$(".cur_passwd_container, .confirm_btn_js").removeClass("hidden"),$(".verification_meth, .for_verification_code_js, .confirm_code_js, .send_code_js, .ver_info_js").addClass("hidden"),$(".confirm_pass_js").removeClass("hidden"),$(".error_msg_js").text(""),componentHandler.upgradeDom()}),$("#verification").on("click",'[for="choise_verification_code"]',function(){$(".verification_meth, .send_code_js").removeClass("hidden"),$(".cur_passwd_container, .confirm_pass_js").addClass("hidden"),$(".confirm_code_js").addClass("hidden"),$(".error_msg_js").text(""),componentHandler.upgradeDom()}),$('[name="cur_passwd"]').change(function(){""==$(this).val()?$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0412\u0430\u0448 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):$(this).val().length<4&&$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c")}),$('[name="verification_code"]').change(function(){""==$(this).val()?$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"):4!=$(this).val().length&&$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f")}),$(".send_code_js").click(function(){$(".for_verification_code_js").removeClass("hidden"),$(".send_code_js").addClass("hidden"),$(".confirm_code_js, .ver_info_js").removeClass("hidden");var b=$('[name="id_user"]').val(),c=$(".phone").val().replace(/[^\d]+/g,"");12==c.length&&(phone=c),data={id_user:b,phone:phone,method:"sms"},ajax("cabinet","AccessCode",data).done(function(){$(".confirm_btn_js").removeAttr("disabled")})}),$(".confirm_pass_js").click(function(){var b=$('[name="id_user"]').val(),c=$('[name="new_passwd"]').val(),d=$('[name="verification"]:checked').data("value"),e=$('[name="cur_passwd"]').val();data={id_user:b,new_passwd:c,curr_pass:e,method:d},$(".cur_passwd").hasClass("is-invalid")||ajax("cabinet","ChangePassword",data).done(function(a){a.success?$("#verification").html('<div class="auth_ok tac"><i class="material-icons">check_circle</i></div><p class="info_text" style="min-width: 300px; text-align: center;">\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d!</p><a href="#" class="close_modal btn_js" data-name="verification"><i class="material-icons mdl-cell--hide-phone mdl-cell--hide-tablet">close</i><i class="material-icons mdl-cell--hide-desktop">cancel</i></a>'):$(".error_msg_js").text(a.msg)})}),$(".confirm_code_js").click(function(){var b=$('[name="id_user"]').val(),c=$('[name="new_passwd"]').val(),d=$('[name="verification"]:checked').data("value"),e=$('[name="verification_code"]').val();data={id_user:b,code:e,new_passwd:c,method:d},$(".for_verification_code_js").hasClass("is-invalid")||ajax("cabinet","ChangePassword",data).done(function(a){a.success?$("#verification").html('<div class="auth_ok tac"><i class="material-icons">check_circle</i></div><p class="info_text" style="min-width: 300px; text-align: center;">\u041f\u0430\u0440\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d!</p><a href="#" class="close_modal btn_js" data-name="verification"><i class="material-icons mdl-cell--hide-phone mdl-cell--hide-tablet">close</i><i class="material-icons mdl-cell--hide-desktop">cancel</i></a>'):$(".error_msg_js").text(a.msg)}).fail(function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430!")})}),$(".phone").mask("+38 (099) ?999-99-99"),$('input[name="options"]').on("change",function(){$("#quiz .company_details").css("display","block")}),$("#quiz .delivery_service").on("click",'input[name="service"]',function(){$('.delivery_service input[name="service"]:checked')&&$('[data-value="2"]')&&(GetDeliveryMethods($(this).val(),$("#city_select .select_field").text()),Position($(this).closest('[data-type="modal"]')))}),$('.delivery_type [data-value="1"]').on("click",function(){$(".delivery_address").css("display","block"),$(".post_office").css("display","none")}),$('.delivery_type [data-value="2"]').on("click",function(){$('.delivery_service input[name="service"]:checked')&&($(".post_office").css("display","block"),$(".delivery_address").css("display","none"),GetDeliveryMethods($('.delivery_service input[name="service"]:checked').val(),$("#city_select .select_field").text()))}),$("#quiz .mdl-button").on("click",function(a){return a.preventDefault(),!1}),$("#access_recovery").on("click",'label[for="chosen_mail"]',function(){$("#access_recovery #recovery_email").closest("div").addClass("hidden"),$("#access_recovery .input_container").html('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label>Email</label><input class="mdl-textfield__input input_validator_js" data-input-validate="email" name="value" id="recovery_email"><label class="mdl-textfield__label" for="recovery_email"></label><span class="mdl-textfield__error"></span></div>'),componentHandler.upgradeDom()}),$("#access_recovery").on("click",'label[for="chosen_sms"]',function(){$("#access_recovery #recovery_email").closest("div").addClass("hidden"),$("#access_recovery .input_container").html('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label>\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430</label><input class="mdl-textfield__input phone input_validator_js" data-input-validate="phone" name="value" type="text" id="recovery_phone"><label class="mdl-textfield__label" for="recovery_phone"></label><span class="mdl-textfield__error"></span></div>'),$(".phone").mask("+38 (099) ?999-99-99"),componentHandler.upgradeDom()}),$("#access_recovery").on("keyup",".input_container input",function(){$("#access_recovery .input_container input").closest("div").removeClass("is-invalid")}),$("#access_recovery").on("click","#continue",function(a){a.preventDefault();var d,b=$(this).closest('[data-type="modal"]'),c=b.find('[name="recovery_method"]:checked'),e=!1;if("sms"==c.data("value")){var f=$("#access_recovery .phone").val().replace(/[^\d]+/g,"");12==f.length&&(d=f,e=!0)}if("email"==c.data("value")){var g=b.find('[name="value"]').val();if(""!==g){var h=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;h.test(g)?($("#access_recovery .input_container input").closest("div").removeClass("is-invalid"),d=g,e=!0):($("#access_recovery .input_container input").closest("div").addClass("is-invalid"),$(".mdl-textfield__error").text("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e"))}else $("#access_recovery .input_container input").closest("div").addClass("is-invalid"),$(".mdl-textfield__error").text("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email")}data={method:c.data("value"),value:d},e===!1?$("#access_recovery .input_container input").closest("div").addClass("is-invalid"):(addLoadAnimation("#access_recovery"),ajax("auth","accessRecovery",data).done(function(a){removeLoadAnimation("#access_recovery"),a.success?b.find(".password_recovery_container").html(a.content):b.find(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(a.msg),componentHandler.upgradeDom()}))}),$("#access_recovery").on("keyup","#passwd",function(a){a.preventDefault();var b=$(this).val(),c=$("#access_recovery #passwdconfirm").val();ValidatePass(b,$(this)),""!==c&&ValidatePassConfirm(b,c)}),$("#access_recovery").on("keyup","#passwdconfirm",function(){var a=$("#access_recovery #passwd").val(),b=$(this).val();ValidatePassConfirm(a,b)}),$("#access_recovery").on("click","#restore",function(a){a.preventDefault();var b=$(this).closest('[data-type="modal"]'),c=b.find('[type="hidden"]').val(),d=b.find('[name="code"]').val();data={id_user:c,code:d},addLoadAnimation("#access_recovery"),ajax("auth","check\u0421ode",data).done(function(a){removeLoadAnimation("#access_recovery"),a.success?b.find(".password_recovery_container").html(a.content):b.find('[name="code"]').closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(a.msg),componentHandler.upgradeDom()})}),$("#access_recovery").on("click","#confirm_btn",function(a){a.preventDefault(),$("#access_recovery .mdl-textfield__error").empty();var b=$(this).closest('[data-type="modal"]'),c=b.find('[type="hidden"]').val(),d=b.find('input[name="new_passwd"]'),e=b.find('input[name="passwdconfirm"]').val();ValidatePass(d.val(),d),d.val().length>=4&&""!==e&&!ValidatePassConfirm(d.val(),e)&&(data={id_user:c,passwd:e},b.find(".mdl-textfield").hasClass("is-invalid")||(addLoadAnimation("#access_recovery"),ajax("auth","accessConfirm",data).done(function(a){console.log(a),removeLoadAnimation("#access_recovery"),a.success?($(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden"),ajax("auth","GetUserProfile",!1,"html").done(function(a){$("#user_profile").append('<img src="/images/noavatar.png"/>'),$(".user_profile_js").html(a),$(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden")
}),b.find(".password_recovery_container").html(a.content)):value.closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(a.msg),componentHandler.upgradeDom()})))}),$("#regpasswd").keyup(function(a){a.preventDefault();var b=$(this).val(),c=$("#settings #passwdconfirm").val();ValidatePass(b,$(this)),""!==c&&ValidatePassConfirm(b,c)}),$("#passwdconfirm").keyup(function(){var a=$("#settings #regpasswd").val(),b=$(this).val();ValidatePassConfirm(a,b)}),$('#passwd, #regpasswd, [name="passwdconfirm"]').focusout(function(a){a.preventDefault(),$(this).closest(".mdl-textfield").find(".mdl-textfield__error").empty()}),$(".login_btn").on("click",function(a){openObject("auth"),$("#auth #sign_in").show().removeClass("hidden"),$("#auth #sign_up").hide().addClass("hidden"),a.preventDefault()}),$("#auth").on("click",".switch",function(a){a.preventDefault(),$(this).closest(".modal_container").fadeOut().addClass("hidden"),$("#"+$(this).data("name")).hide().removeClass("hidden").fadeIn(),Position($("#auth"))}),$("#auth").on("click",".sign_in",function(a){a.preventDefault(),addLoadAnimation("#sign_in");var b=$(this).closest("form"),c=b.find("input#email").val(),d=b.find("input#passwd").val();b.find(".error").fadeOut(),a.preventDefault();var e=c.replace(/\D/g,""),f=/^(38)?(\d{10})$/;f.test(e)&&(c=10===e.length?38+e:e),ajax("auth","sign_in",{email:c,passwd:d}).done(function(a){$(".userContainer");if(removeLoadAnimation("#sign_in"),1!=a.err){if(h===!0){var d=$(".products_page"),e=current_id_category,f=parseInt(d.find(".paginator li.active").first().text()),j=(parseInt(d.find(".paginator li.active").last().text()),0),k=30*(f-1);$(".show_more").append('<span class="load_more"></span>'),addLoadAnimation(".products");var l={action:"getmoreproducts_desctop",id_category:e,shown_products:j,skipped_products:k};"search"===current_controller||"product"===current_controller?location.reload():UpdateProductsList(d,l)}closeObject("auth"),3==a.member.gid&&($("#header_js .cart_item").addClass("hidden"),removeFromCart()),$(".login_btn").addClass("hidden"),a.member.avatar?$(".cabinet_btn").removeClass("hidden").find("img").attr("src",a.member.avatar):location.reload(),$(".cabinet_btn").find(".name").html(a.member.first_name?a.member.first_name:a.member.name),ajax("auth","GetUserProfile",!1,"html").done(function(a){$(".user_profile_js").html(a),$("#authorized").removeClass("hidden"),$(".userContainer").removeClass("hidden"),$('button[value="\u041d\u0435\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d"]').addClass("hidden")}),void 0!==$("#auth").data("from")}else b.find(".error").text(a.msg).fadeIn()})}),$('#sign_up [name="passwd"]').keyup(function(){var a=$(this).val(),b=$('#sign_up [name="passwdconfirm"]').val();ValidatePass(a,$(this)),""!==b&&ValidatePassConfirm(a,b)}),$('#sign_up [name="passwdconfirm"]').keyup(function(){var a=$('#sign_up [name="passwd"]').val(),b=$(this).val();ValidatePassConfirm(a,b)}),$("#sign_up .sign_up").click(function(a){a.preventDefault(),addLoadAnimation("#sign_up");var b=$(this).closest("form"),c=b.find('[name="name"]').val(),d=b.find('[name="phone"]').val(),e=b.find('[name="id_contragent"]').val(),f=b.find('[name="passwd"]').val(),g=b.find('[name="passwdconfirm"]').val(),h=d.replace(/\D/g,"");d=10===h.length?38+h:h;var i={name:c,phone:d,id_contragent:e,passwd:f,passwdconfirm:g};ajax("auth","register",i).done(function(a){0===a.err?(ajax("auth","GetUserProfile",!1,"html").done(function(a){$(".user_profile_js").html(a),$(".login_btn").addClass("hidden"),$(".cabinet_btn").removeClass("hidden").find("img").attr("src","/images/noavatar.png")}),openObject("registerComplete")):$.each(a.errm,function(a,b){$('[name="'+a+'"]').closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").html(b)}),removeLoadAnimation("#sign_up")}).fail(function(a){console.log("fail"),console.log(a)})}),$(".error_js").click(function(a){a.preventDefault();var b=$(this).closest("form"),c={};b.find(".mdl-textfield__input").each(function(a,b){c[$(b).attr("name")]=$(b).val()}),ajax("errors","error",c)}),$(".estimate_js").on("click",function(a){a.preventDefault();var b=$(this).closest(".modal_container"),c=b.find('input[name="phone"]').val(),e=b.find(".mdl-textfield").hasClass("is-invalid")?!1:!0;e===!0&&(addLoadAnimation("#estimateLoad"),ajax("product","AddEstimate",new FormData($(this).closest("form")[0]),"json",!0).done(function(a){switch(1===a.status?b.find(".estimate_info_js").css("color","green"):b.find(".estimate_info_js").css("color","red"),removeLoadAnimation("#estimateLoad"),a.status){case 1:void 0!==c?($("#issue_result_ok").find(".info_text").html(a.message),ajax("auth","GetUserProfile",!1,"html").done(function(a){$("#user_profile").append('<img src="/images/noavatar.png"/>'),$(".user_profile_js").html(a),$(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden"),b.find('input[name="name"], input[name="phone"]').closest("div").remove()})):$("#issue_result_ok").find(".info_text").text("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"),b.find('[name="comment"], [type="file"]').val(""),b.find(".estimate_info_js").html(""),b.find(".mdl-textfield").removeClass("is-invalid"),openObject("issue_result_ok");break;case 2:b.find('input[name="phone"]').closest(".mdl-textfield").addClass("is-invalid"),b.find(".estimate_info_js").html(a.message);break;case 3:b.find(".estimate_info_js").text(a.message);break;case 4:b.find(".estimate_info_js").html(""),$("#issue_result_err").find(".info_text").html(a.message),openObject("issue_result_err");break;case 5:b.find('input[type="file"]').closest(".mdl-textfield").addClass("is-invalid"),b.find(".estimate_info_js").text(a.message);break;default:console.log(a)}}))}),0===$("header .cart_item a.cart i").data("badge")&&$("#cart .clear_cart").addClass("hidden"),$("#cart_customer_search .search_form_js").on("submit",function(a){a.preventDefault();var b=$("#cart_customer_search .phone").val(),c=b.replace(/\D/g,""),d=/^(38)?(\d{10})$/;d.test(c)&&(b=10===c.length?38+c:c),12===b.length?(console.log("\u0442\u0435\u043b\u0435\u0444\u043e\u043d \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043b\u0438 \u0432\u0441\u0435 \u043e\u043a"),addLoadAnimation("#cart_customer_search"),ajax("cart","getCustomerInfo",{phone:b},"html").done(function(a){removeLoadAnimation("#cart_customer_search"),$("#cart_customer_search .search_results_block").html(a),void 0===$("#cart_customer_search .customer_main_info input").val()?($("#cart_customer_search .new_name_block").removeClass("hidden"),$("#cart_customer_search .add_customer").addClass("hidden"),$("#cart_customer_search .ceate_new_customer").removeClass("hidden"),$("#cart_customer_search .new_name_block input").each(function(){$(this).val("")})):($("#cart_customer_search .new_name_block").addClass("hidden"),$("#cart_customer_search .add_customer").removeClass("hidden"),$("#cart_customer_search .ceate_new_customer").addClass("hidden"))})):$(this).closest(".search_block").find(".phone").addClass("input_phone_error")}),$("#cart_customer_search .add_customer").on("click",function(){var a=$("#cart_customer_search .customer_main_info input").val();addLoadAnimation("#cart_customer_search"),ajax("cart","bindingCustomerOrder",{id_customer:a}).done(function(){removeLoadAnimation("#cart_customer_search"),closeObject("cart_customer_search"),openObject("cart")})}),$("#cart_customer_search .ceate_new_customer").on("click",function(){var a=$("#new_user_surname").val(),b=$("#new_user_name").val(),c=$("#new_user_middle_name").val(),d=$("#cart_customer_search .phone").val(),e=!0,f=d.replace(/\D/g,""),g=/^(38)?(\d{10})$/;g.test(f)&&(d=10===f.length?38+f:f),$("#cart_customer_search .new_name_block input").each(function(){""===$(this).val()&&($(this).closest("div").addClass("is-invalid"),e=!1)}),e===!0&&(addLoadAnimation("#cart_customer_search"),ajax("cart","createCustomer",{phone:d,first_name:b,last_name:a,middle_name:c}).done(function(){removeLoadAnimation("#cart_customer_search"),closeObject("cart_customer_search"),openObject("cart")}))}),$("#cart_customer_search .phone").keyup(function(){console.log("\u043d\u0430\u0436\u0430\u043b\u0438"),$(this).removeClass("input_phone_error")}),$(".order").on("click",".number",function(){var a=$(this).closest(".order");a.hasClass("expanded")?$(".order").removeClass("expanded").find(".tabs").slideUp():($(".order").removeClass("expanded").find(".tabs").slideUp(),a.addClass("expanded").find(".tabs").slideDown())}),$(".showall").on("click",function(){$(".order").addClass("expanded").find(".tabs").slideDown()}),$(".hideall").on("click",function(){$(".order").removeClass("expanded").find(".tabs").slideUp()}),$("#percent tr:first").css("color","#000"),$(".toBigPhoto").click(function(){$("#big_photo img").attr("src",$(this).data("original-photo"))}),moveObjects(),$('input[name="product_limit_checkbox"]').on("change",function(){var a=$(this).data("id-product"),b=$("#product_limit_mopt_"+a);limit=this.checked?1e7:0,b.val(limit),toAssort($(this).data("id-product"),0,$(this).data("koef"),$(this).data("supp"))}),$("body").on("mouseenter","button",function(){var a=parseInt($(this).closest(".quantity").find(".qty_js").val()),b=$(this).closest(".quantity").find(".minQty").val(),c=parseInt($.cookie("sum_range")),d=parseInt($(this).closest(".buy_block").find(".priceOpt3").val()),e=parseInt($(".currentCartSum").html()),f=parseInt($(this).closest(".buy_block").find(".itemProdQty").html());if($(this).hasClass("btn_remove")===!0)if(a==b){var g=$(this).closest(".buy_block").find(".priceMopt"+c).val();$(".tooltipForBtnRemove_js").removeClass("hidden").html("\u0434\u043e "+a+" \u0448\u0442. \u0446\u0435\u043d\u0430 "+g+" \u0433\u0440\u043d.")}else 0===c&&e-d<=columnLimits[0]&&$(".tooltipForBtnRemove_js").removeClass("hidden").html("\u0434\u043e "+a+" \u0448\u0442. \u0438\u0437\u043c\u0435\u043d\u0438\u0442 % \u0441\u043a\u0438\u0434\u043a\u0438"),1===c&&e-d<=columnLimits[1]&&$(".tooltipForBtnRemove_js").removeClass("hidden").html("\u0434\u043e "+a+" \u0448\u0442. \u0438\u0437\u043c\u0435\u043d\u0438\u0442 % \u0441\u043a\u0438\u0434\u043a\u0438");else if(a+f==b){var h=$(this).closest(".buy_block").find(".priceOpt"+c).val();$(".tooltipForBtnAdd_js").removeClass("hidden").html("\u0431\u043e\u043b\u044c\u0448\u0435 "+b+" \u0448\u0442. \u0446\u0435\u043d\u0430 "+h+" \u0433\u0440\u043d.")}else 1===c&&e+d>=columnLimits[0]&&$(".tooltipForBtnAdd_js").removeClass("hidden").html("\u0431\u043e\u043b\u044c\u0448\u0435 "+a+" \u0448\u0442. \u0438\u0437\u043c\u0435\u043d\u0438\u0442 % \u0441\u043a\u0438\u0434\u043a\u0438"),2===c&&e+d>=columnLimits[1]&&$(".tooltipForBtnAdd_js").removeClass("hidden").html("\u0431\u043e\u043b\u044c\u0448\u0435 "+a+" \u0448\u0442. \u0438\u0437\u043c\u0435\u043d\u0438\u0442 % \u0441\u043a\u0438\u0434\u043a\u0438"),3===c&&e+d>=columnLimits[2]&&$(".tooltipForBtnAdd_js").removeClass("hidden").html("\u0431\u043e\u043b\u044c\u0448\u0435 "+a+" \u0448\u0442. \u0438\u0437\u043c\u0435\u043d\u0438\u0442 % \u0441\u043a\u0438\u0434\u043a\u0438")}).on("mouseleave","button",function(){$(".tooltipForBtnAdd_js").addClass("hidden"),$(".tooltipForBtnRemove_js").addClass("hidden")}),$(".to_org_catalog_btn_js").on("click",function(){$.cookie("Segmentation",1,{path:"/"})}),$(".to_magaz_catalog_btn_js").on("click",function(){$.cookie("Segmentation",2,{path:"/"})});var r=!1;$("body").on("click",".err_msg_as_knob_js, .screen_btn_js, .canvasReady_js",function(a){$(this).hasClass("err_msg_as_knob_js")?($(".err_msg_as_js").hasClass("shown")?$(".err_msg_as_js").removeClass("shown").css("top","100%"):$(".err_msg_as_js").addClass("shown").css("top","calc(100% - "+$(".err_msg_as_js").outerHeight()+"px)"),r||(r=!0,a.preventDefault(),$("#err_canvas").attr({width:$(window).outerWidth(),height:$("header").outerHeight()+$("section.main").outerHeight()+$(".phone_err_msg_js").outerHeight()+$("footer").outerHeight()}),$(".screen_btn_js").removeClass("screen_btn_js").addClass("clicked_js").addClass("is-checked"),$(".err_msg_as_js").removeClass("shown").css("top","100%"),$(document).outerWidth()<450&&$(".err_msg_as_form_js .mdl-textfield").css("height","calc(100vh - 345px)"),GetScreenshot())):$(this).hasClass("screen_btn_js")?(a.preventDefault(),r=!0,$("#err_canvas").attr({width:$(window).outerWidth(),height:$("header").outerHeight()+$("section.main").outerHeight()+$(".phone_err_msg_js").outerHeight()+$("footer").outerHeight()}),$(this).removeClass("screen_btn_js").addClass("clicked_js").addClass("is-checked"),$(".err_msg_as_js").removeClass("shown").css("top","100%"),GetScreenshot()):$(this).hasClass("canvasReady_js")&&($(".canvas_toolbar").css("display","none"),GetScreenshot()),$(".err_msg_as_form_js").find("textarea").focus()}),$("body").on("click",".clicked_js",function(a){a.preventDefault(),r=!0,closeObject("big_photo"),$(this).addClass("screen_btn_js").removeClass("is-checked").removeClass("clicked_js"),$("#savedCopyContainer").css("display","none"),$(document).outerWidth()<450&&$(".err_msg_as_form_js .mdl-textfield").css("height","calc(100vh - 145px)"),$(".err_msg_as_js").addClass("shown").css("top","calc(100% - "+$(".err_msg_as_js").outerHeight()+"px)"),$("#savedImageCopy").attr("src",""),$(".err_msg_as_form_js").find("textarea").focus(),$("#err_canvas").attr({width:"20",height:"20"})}),$(".go_to_canvas_toolbar_js").click(function(){closeObject("big_photo"),$(".err_msg_as_js").removeClass("shown").css("top","100%"),$(".canvas_toolbar").css("display","block"),$("#err_canvas").attr({width:$(window).outerWidth(),height:$("header").outerHeight()+$("section.main").outerHeight()+$(".phone_err_msg_js").outerHeight()+$("footer").outerHeight()})}),$("body").on("click",".img_zoom_js",function(){$(".err_msg_as_js").removeClass("shown").css("top","100%"),$("#err_canvas").attr({width:"20",height:"20"});var b=$("#savedImageCopy").attr("src");$("#big_photo").css({overflow:"auto","overflow-x":"hidden",padding:"2em"}),$("#big_photo img").attr("src",b).css("width","100%"),openObject("big_photo")}),$(".err_msg_as_send_js").click(function(){var b=$('textarea[name="errcomment"]').val(),c=$("#savedImageCopy").attr("src"),d={err_msg:b,img_src:c};ajax("errors","error",d).done(function(a){3!=a.status?($('textarea[name="errcomment"] + label').css("color","rgba(0, 0, 0, .26)"),$('textarea[name="errcomment"]').val("").closest("div").removeClass("is-dirty"),$("#savedCopyContainer").css("display","none"),$(".err_msg_as_js").addClass("shown").css("top","calc(100% - "+$(".err_msg_as_js").outerHeight()+"px)"),$("#savedImageCopy").attr("src",""),$(".err_msg_as_js").removeClass("shown").css("top","100%"),$(".clicked_js").addClass("screen_btn_js").removeClass("clicked_js").removeClass("is-checked"),componentHandler.upgradeDom()):$('textarea[name="errcomment"] + label').css("color","#ff0000");var b={message:a.message},c=document.querySelector("#snackbar");c.MaterialSnackbar.showSnackbar(b)})}),$("body").on("click",".problem_area_js",function(){var a="yellow",b="rect";init(a,b)}),$("body").on("click",".confidential_js",function(){var a="black",b="fillrect";init(a,b)}),$("body").on("click",".pencil_for_canvas_js",function(){var a="red",b="pencil";init(a,b)}),$("body").on("click",".eraser_for_canvas_js",function(){var a="#fff",b="eraser";init(a,b)}),$("body").on("click",".canvasClear_js",function(){clear_canvas()}),$("body").on("click",".close_canvas_toolbar_js",function(){$(".canvas_toolbar").css("display","none"),$("#err_canvas").attr({width:"20",height:"20"}),clear_canvas()}),$(document).scroll(function(){$(document).scrollTop()>=$(window).outerHeight()?$(".go_up_js").css("bottom","2em"):$(".go_up_js").css("bottom","-3em")}),$(".go_up_js").click(function(){$("html, body").animate({scrollTop:0},1e3,"easeInOutCubic")}),$("body").on("click",".mob_search_btn_js",function(a){a.preventDefault(),$("html").addClass("active_bg").find("header").addClass("opened").find("div.search").addClass("is-focused"),componentHandler.upgradeDom()}),$("body").on("click",".header_search_close_js",function(a){a.preventDefault(),$("html").removeClass("active_bg").find("header").removeClass("opened").find("div.search").removeClass("is-focused"),componentHandler.upgradeDom()}),$("body").on("click",".offers_js, .issue_js",function(){var a=$(this),b=$(this).closest(".modal_container").find("form");if(""==b.find("textarea").val()?b.find("textarea").closest(".mdl-textfield").addClass("is-invalid"):b.find("textarea").closest(".mdl-textfield").removeClass("is-invalid"),""==b.find('input[name="user_email"]').val()&&b.find('input[name="user_email"]').closest(".mdl-textfield").addClass("is-invalid"),b.find(".mdl-textfield").hasClass("is-invalid"))b.find('input[name="user_email"]').closest(".mdl-textfield").find(".mdl-textfield__error").text(""!=b.find('input[name="user_email"]').val()?"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 Email \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e":"\u041f\u043e\u043b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f!");else{var c={issue:$(this).hasClass("offers_js")?0:1,id_user:b.find('input[type="hidden"]').val(),email:b.find('input[name="user_email"]').val(),comment:b.find("textarea").val()};ajax("global","SaveGuestComment",c).done(function(c){switch(c.err){case 1:b.find('input[name="user_email"]').closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(c.msg);break;case 2:b.find("textarea").closest(".mdl-textfield").addClass("is-invalid");break;case 3:closeObject(a.hasClass("offers_js")?"offers":"issue"),$(".issue_result_js .modal_container").html('<div class="issue_ok"><i class="material-icons">check_circle</i></div><p class="info_text">\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u044b\u043b\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e</p>'),openObject("issue_result");break;case 4:closeObject(a.hasClass("offers_js")?"offers":"issue"),$(".issue_result_js .modal_container").html('<div class="issue_err"><i class="material-icons">error</i></div><p class="info_text">\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443.</p>'),openObject("issue_result");break;default:console.log(c)}}).fail(function(){console.log("error")})}}),$("body").on("click",".feedback_comment_reply_js",function(a){a.preventDefault(),"false"==$(this).attr("data-isauthorized")?openObject("auth"):($(this).addClass("hidden").closest(".feedback_item_js").find(".comment_reply_cancel_js").removeClass("hidden"),$(this).closest(".feedback_item_js").append('<div class="reply_wrap"><form action="'+$(this).attr("data-action")+'" method="post" onsubmit="onCommentSubmit()"><input type="hidden" name="pid_comment" value="'+$(this).attr("data-idComment")+'"><textarea name="feedback_text" id="feedback_comment_reply" cols="30" required></textarea><div class="user_data hidden"><div class="fild_wrapp"><label for="feedback_author">\u0412\u0430\u0448\u0435 \u0438\u043c\u044f:</label><input type="text" name="feedback_author" id="feedback_author" required value="\u041f\u0435\u0442\u044f"></div><div class="fild_wrapp"><label for="feedback_authors_email">\u042d\u043b.\u043f\u043e\u0447\u0442\u0430:</label><input type="email" name="feedback_authors_email" id="feedback_authors_email" required value="petya@gmail.com"></div></div><button type="submit" name="sub_com" class="mdl-button mdl-js-button">\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c</button></form></div>'))}),$("body").on("click",".comment_reply_cancel_js",function(a){a.preventDefault(),$(this).closest(".feedback_item_js").find(".reply_wrap").remove(),$(this).addClass("hidden").closest(".feedback_item_js").find(".feedback_comment_reply_js").removeClass("hidden")}),$("body").on("change",'[name="product_action"]',function(){var b={},c=$(".product-action-chooser_js");b.id_product=$(this).attr("data-idproduct"),b.checked=this.checked?1:0,ajax("products","ProductAction",b).done(function(a){a.list.length>0&&c.hasClass("invisible")?c.addClass("opened").removeClass("invisible"):0==a.list.length&&c.removeClass("opened").addClass("invisible")})}).on("click",".action-chooser__close-js",function(){var a=$(this).closest(".product-action-chooser_js");a.toggleClass("opened")}).on("click",".action-chooser__clear-js",function(){var a=$(".product-action-chooser_js");ajax("products","ProductActionClear").done(function(){a.removeClass("opened").addClass("invisible"),location.reload()})}),$("body").on("click",".seasonality_js",function(){$(this).hasClass("with_demand_graph")||(addLoadAnimation("#seasonality"),$(this).addClass("with_demand_graph"),$("#seasonality").append($(document).outerWidth()>500?'<iframe seamless id="demand_graph" class="demand_graph" src="https://www.google.com/trends/fetchComponent?hl=ru-RU&q='+$("input[name=par_lvl]").val()+"&geo=UA&date=today+24-m&cid=TIMESERIES_GRAPH_0&export=5&w="+($(".tab-content").outerWidth()-(2*parseInt($(".tab-content").css("padding-right"))+8))+'&h=470"></iframe>':'<iframe seamless id="demand_graph" class="demand_graph" src="https://www.google.com/trends/fetchComponent?hl=ru-RU&q='+$("input[name=par_lvl]").val()+"&geo=UA&date=today+24-m&cid=TIMESERIES_GRAPH_0&export=5&w="+($(".tab-content").outerWidth()-(2*parseInt($(".tab-content").css("padding-right"))+10))+'&h=400"></iframe>'),setTimeout(function(){removeLoadAnimation("#seasonality")},2e3))}),$("body").on("click",".add_del_waiting_list_js",function(a){a.preventDefault();var b=$(this).closest(".wlist_msg_wrap_js");AddInWaitingList(b.data("id-product"),b.data("id-user"),b.data("email"),$(this)),b.find(".add_wrap_js").addClass("hidden"),b.find(".del_wrap_js").removeClass("hidden")}),$("#submit").closest("div").on("click",function(){if(1==$(this).find("#submit").prop("disabled")){var a={message:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f!"},b=document.querySelector("#snackbar");b.MaterialSnackbar.showSnackbar(a)}}),$(".product_label_js").on("click",function(){addLoadAnimation("#gift_products"),ajax("product","GetGiftsList",{},"html").done(function(a){removeLoadAnimation("#gift_products"),$("#gift_products .modal_container").html(a),Position($("#gift_products"))})}),$(".gift_modal").on("click",".gift_product_js",function(){$(this).hasClass("active")?($(".gift_modal .gift_product_js").removeClass("disabled").removeClass("active"),$(".id_gift_input_js").val(null)):($(".gift_modal .gift_product_js").removeClass("active").addClass("disabled"),$(this).removeClass("disabled").addClass("active"),$(".id_gift_input_js").val($(this).find(".id_gift_product_js").val()))}),$(".cart_gift_select_js").on("click",function(){addLoadAnimation(".gift_modal");var a=$(this).closest(".gift_modal").find(".id_gift_input_js").val();ajax("cart","chosenGift",{id_product:a}).done(function(){removeLoadAnimation(".gift_modal"),closeObject("gift_select"),openObject("cart")})}),$(".gift_btn_js").on("click",function(){var a=$(this),b=a.closest(".gift").find(".id_gift_js").val(),c=$(".id_agent_js").val(),d=a.closest(".gift").hasClass("selected")?0:1;addLoadAnimation(a.closest(".gift")),ajax("product","agentGiftToggle",{id_product:b,id_agent:c,add:d}).done(function(b){if(removeLoadAnimation(a.closest(".gift")),b.success===!0)a.closest(".gift").toggleClass("selected");else{var c={message:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u0437\u0436\u0435."},d=document.querySelector("#snackbar");d.MaterialSnackbar.showSnackbar(c)}})}),$("#preview, #caruselCont").on("click","#owl-product_mini_img_js .owl-item",function(a){$(".product_main_img").find("#mainVideoBlock").addClass("hidden"),$(".product_main_img").find("iframe").attr("src","");var b=$(this).find("img").attr("src"),c=$(window).width();if(c>711){$("#owl-product_mini_img_js").find("img").removeClass("act_img"),$("#owl-product_mini_img_js").find("iframe").removeClass("act_img"),$(this).find("img").addClass("act_img");var d=$(".path_root_js").val(),e=$(".path_product_img_js").val();b=b.indexOf(e.replace(d,""))>-1?b.replace("/thumb/","/original/"):b.replace("_thumb/",""),$(".product_main_img").hide().fadeIn("100").find(".main_img_js").attr("src",b)}else a.preventDefault()}).on("click",".videoBlock",function(a){a.stopPropagation(),$("#owl-product_mini_img_js").find("iframe").removeClass("act_img"),$("#owl-product_mini_img_js").find("img").removeClass("act_img"),$(this).find("iframe").addClass("act_img");var b=$(this).find("iframe").attr("src");$(".product_main_img").find("iframe").attr("src",b),$(".product_main_img").find("#mainVideoBlock").removeClass("hidden")}),$("#demand_graph").load(function(){$(this).contents().find("body").css("overflow","hidden"),$(this).contents().find("head").append('<link type="text/css" rel="Stylesheet" href="https://xt.ua/themes/default/css/page_styles/product.css" />')}),$("body").on("click",".card .favorite",function(a){a.preventDefault();var b=$(this).closest(".card");$(this).hasClass("added")?($(this).removeClass("added"),RemoveFavorite(b.data("idproduct"),$(this))):($(this).addClass("added"),AddFavorite(b.data("idproduct"),$(this)))}).on("click",".card .fortrending",function(a){a.preventDefault(a);var b=$(this).closest(".card");$(this).hasClass("added")?($(this).removeClass("added"),RemoveFromWaitingList(b.data("idproduct"),b.data("id-user"),b.data("email"),$(this))):($(this).addClass("added"),AddInWaitingList(b.data("idproduct"),b.data("id-user"),b.data("email"),$(this)))}).on("click",".apps_panel .favorite",function(a){a.preventDefault();var b=$(this);b.hasClass("added")?(b.removeClass("added"),RemoveFavorite(b.data("id-product"),$(this),!0)):(b.addClass("added"),AddFavorite(b.data("id-product"),$(this),!0))}).on("click",".apps_panel .fortrending",function(a){a.preventDefault(a),$(this).find(".waiting_list").hasClass("arrow")?($(this).find(".waiting_list").removeClass("arrow"),RemoveFromWaitingList($(this).data("id-product"),$(this).data("id-user"),$(this).data("email"),$(this))):($(this).find(".waiting_list").addClass("arrow"),AddInWaitingList($(this).data("id-product"),$(this).data("id-user"),$(this).data("email"),$(this)))}),$(".price_help_js").on("click",function(){var a=$(this).closest(".card").data("idproduct"),b=$("#price_details");b.find(".modal_container").html(""),addLoadAnimation(b),ajax("product","priceHelp",{id_product:a},"html").done(function(a){removeLoadAnimation(b),$("#price_details .modal_container").html(a),Position(b)})}),$(".product_main_img").on("click",function(){$("#big_photo img").css("height",$('#big_photo[data-type="modal"]').outerHeight()+"px")}),$("body").on("click",".show_preview_js",function(){var a=$("#preview"),b=$(this).closest(".card").data("idproduct");Position(a),a.find(".modal_container").html(""),addLoadAnimation(a),ajax("product","GetPreview",{id_product:b},"html").done(function(b){a.find(".modal_container").html(b),componentHandler.upgradeDom(),removeLoadAnimation(a)})}),$("body").on("mouseenter",".search_category .mdl-selectfield__box, .search_category .mdl-selectfield__list-option-box li",function(a){a.preventDefault(),$(".search_category.mdl-selectfield").addClass("is-focused")}),$("body").on("mouseleave",".search_category .mdl-selectfield__box, .search_category .mdl-selectfield__list-option-box li",function(a){a.preventDefault(),$(".search_category.mdl-selectfield").removeClass("is-focused")}),$("body").on("click",".search_category .mdl-selectfield__list-option-box li",function(a){a.preventDefault(),$(".search_category.mdl-selectfield").removeClass("is-focused")}),$("body").on("focusout",".input_validator_js",function(){userInfoValidator($(this))}),addLoadAnimation(".navbar_js")}),$(document).ready(function(){$("#subCategory_grid").masonry(),ajax("navigation","generateNavigation",!1,"html").done(function(a){if($(".navbar_js").html(a),$(".catalog").hasClass("expanded")){var b=$(".navbar_js").find('[data-lvl="1"] > .link_wrap');$(".navbar_js").height(b.length*b.first().outerHeight())}})});